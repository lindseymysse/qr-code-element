var e,t,n,i,a,s,r,o,c,l,d,u,h,p,v={845:()=>{class e extends HTMLElement{video_polling=!1;flipped=!1;eye_size=768;contrast=100;saturation=100;brightness=100;hue=0;selected_device=null;render(){const e=document.createElement("button");e.classList.add("initialize-button"),e.innerText="Connect",e.addEventListener("click",(e=>{this.openEYE()})),this.appendChild(e)}drawLine(e,t,n,i,a=1,s="red"){const r=this.final_canvas_context;r.beginPath(),r.moveTo(e,t),r.lineTo(n,i),r.lineWidth=a,r.strokeStyle=s,r.stroke()}createMenu(){const e=document.createElement("details"),t=document.createElement("summary");e.appendChild(t),this.menu=document.createElement("section"),e.appendChild(this.menu),this.appendChild(e)}createFlipButton(){const e=document.createElement("label");e.innerText="Flip Image";const t=document.createElement("input");t.setAttribute("type","checkbox"),e.appendChild(t),this.menu.appendChild(e),t.addEventListener("click",(e=>{this.scratch_canvas_context.translate(this.eye_size,0),this.scratch_canvas_context.scale(-1,1)}))}createContrastSlider(){const e=document.createElement("label");e.innerText="Contrast";const t=document.createElement("input");t.setAttribute("type","range"),t.setAttribute("min",0),t.setAttribute("max",300),t.value=100,e.appendChild(t),this.menu.appendChild(e),t.addEventListener("change",(e=>{this.contrast=e.target.value})),this.contrast_slider=t}createSaturationSlider(){const e=document.createElement("label");e.innerText="Saturate";const t=document.createElement("input");t.setAttribute("type","range"),t.setAttribute("min",0),t.setAttribute("max",300),t.value=100,e.appendChild(t),this.menu.appendChild(e),t.addEventListener("change",(e=>{this.saturation=e.target.value})),this.saturation_slider=t}createBrightnessSlider(){const e=document.createElement("label");e.innerText="Brightness";const t=document.createElement("input");t.setAttribute("type","range"),t.setAttribute("min",0),t.setAttribute("max",300),t.value=100,e.appendChild(t),this.menu.appendChild(e),t.addEventListener("change",(e=>{this.brightness=e.target.value})),this.brightness_slider=t}createhueSlider(){const e=document.createElement("label");e.innerText="hue";const t=document.createElement("input");t.setAttribute("type","range"),t.setAttribute("min",0),t.setAttribute("max",360),t.value=180,e.appendChild(t),this.menu.appendChild(e),t.addEventListener("change",(e=>{this.hue=e.target.value})),this.hue_slider=t}createResetButton(){const e=document.createElement("label"),t=document.createElement("button");t.innerText="Reset",e.appendChild(t),this.menu.appendChild(e),t.addEventListener("click",(e=>{this.contrast_slider.value=100,this.brightness_slider.value=100,this.saturation_slider.value=100,this.hue_slider.value=0,this.contrast=100,this.saturation=100,this.brightness=100,this.hue=0}))}async createSelectedDeviceDropdown(){const e=[...await navigator.mediaDevices.enumerateDevices()].filter((e=>"videoinput"===e.kind)),t=document.createElement("label"),n=document.createElement("select");for(let t in e){const i=e[t],a=document.createElement("option");a.setAttribute("value",i.deviceId),a.innerText=i.label||`Camera ${parseInt(t)+1}`,n.appendChild(a)}n.addEventListener("change",(e=>{this.selected_device=e.target.value,console.log(this.selected_device),this.getUserMedia()})),t.appendChild(n),this.menu.appendChild(t)}createTakePictureButton(){const e=document.createElement("label");this.take_picture_button=document.createElement("button"),this.take_picture_button.classList.add("take-picture-button"),this.take_picture_button.innerText="Take Picture",this.take_picture_button.addEventListener("click",(e=>{e.preventDefault(),this.takePicture()})),e.appendChild(this.take_picture_button),this.menu.appendChild(e)}openEYE(){this.innerHTML="",this.scratch_canvas=document.createElement("canvas"),this.scratch_canvas.addEventListener("click",(e=>{this.video_polling?this.pauseVideoPoll():this.beginVideoPoll()})),this.scratch_canvas.width=this.eye_size,this.scratch_canvas.height=this.eye_size,this.scratch_canvas_context=this.scratch_canvas.getContext("2d",{preserveDrawingBuffer:!0}),this.final_canvas=document.createElement("canvas"),this.final_canvas.width=this.eye_size,this.final_canvas.height=this.eye_size,this.final_canvas_context=this.final_canvas.getContext("2d",{preserveDrawingBuffer:!0}),this.appendChild(this.final_canvas),this.video=document.createElement("video"),this.video.onloadedmetadata=e=>{this.video.play()},this.getUserMedia(),this.createMenu(),this.createFlipButton(),this.createContrastSlider(),this.createSaturationSlider(),this.createBrightnessSlider(),this.createhueSlider(),this.createResetButton(),this.createSelectedDeviceDropdown(),this.createTakePictureButton();const e=[...document.querySelectorAll("details")];document.addEventListener("click",(function(t){e.some((e=>e.contains(t.target)))?e.forEach((e=>e.contains(t.target)?"":e.removeAttribute("open"))):e.forEach((e=>e.removeAttribute("open")))}))}async getJpeg(){return await new Promise((e=>{this.scratch_canvas.toBlob((t=>{e(t)}),"image/jpeg",.8)}))}async getImageData(){return await this.scratch_canvas.toDataURL("image/png")}async takePicture(){const e=await this.getJpeg();this.dispatchEvent(new CustomEvent("NEW PICTURE",{detail:e}))}async getUserMedia(){this.stopVideoStream();const e={video:{deviceId:this.selected_device,width:this.eye_size,height:this.eye_size}};try{const t=await navigator.mediaDevices.getUserMedia(e);this.video.srcObject=t,this.video.volume=0,this.video.play(),this.beginVideoPoll()}catch(e){console.error("Error accessing user media:",e)}}async beginVideoPoll(){this.video_polling=!0,this.video_poll=setInterval((()=>this.pollVideo()),250)}pauseVideoPoll(){this.video_polling=!1,clearInterval(this.video_poll)}async pollVideo(){await this.scratch_canvas_context.drawImage(this.video,0,0,this.eye_size,this.eye_size),this.scratch_canvas_context.filter=`saturate(${this.saturation}%) brightness(${this.brightness}%) contrast(${this.contrast}%) hue-rotate(${this.hue}deg)`;const e=await this.scratch_canvas_context.getImageData(0,0,this.eye_size,this.eye_size);this.final_canvas_context.putImageData(e,0,0),this.dispatchEvent(new CustomEvent("IMAGE DRAWN",{detail:e}))}async initialize(){this.openEYE()}connectedCallback(){this.render()}stopVideoStream(){this.video&&this.video.srcObject&&(this.video.srcObject.getTracks().forEach((e=>e.stop())),this.video.srcObject=null)}disconnectedCallback(){this.pauseVideoPoll(),this.stopVideoStream()}static get observedAttributes(){return[]}attributeChangedCallback(e,t,n){}}customElements.define("e-y-e",e)},220:(e,t,n)=>{n.d(t,{A:()=>o});var i=n(601),a=n.n(i),s=n(314),r=n.n(s)()(a());r.push([e.id,"e-y-e {\n  display: block;\n  position: relative;\n  max-height: 100vh;\n  max-width: 100vw;\n  margin: auto;\n  resize: horizontal;\n  overflow: auto;\n  aspect-ratio: 1;\n}\n\ne-y-e canvas {\n  width: 100%;\n  height: auto;\n}\n\ne-y-e .initialize-button {\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  z-index: 1;\n}\n\ne-y-e details {\n  position: absolute;\n  z-index:1;\n  left: 1em;\n  top: 1em;\n  cursor: pointer;\n  max-height: 100%;\n  overflow: scroll;\n}\n\ne-y-e details section label {\n  cursor: pointer;\n  display: flex;\n  padding: 0.25em;\n}\n\ne-y-e details section button {\n  width: 100%;\n}\n\ne-y-e details section label input {\n  margin-left: auto;\n}\n\n\ne-y-e details section {\n  padding: 1em;\n  background-color: rgba(0,0,0,0.8);\n  color: white;\n}",""]);const o=r},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,a,s){"string"==typeof e&&(e=[[null,e,void 0]]);var r={};if(i)for(var o=0;o<this.length;o++){var c=this[o][0];null!=c&&(r[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);i&&r[d[0]]||(void 0!==s&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=s),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),a&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=a):d[4]="".concat(a)),t.push(d))}},t}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var s={},r=[],o=0;o<e.length;o++){var c=e[o],l=i.base?c[0]+i.base:c[0],d=s[l]||0,u="".concat(l," ").concat(d);s[l]=d+1;var h=n(u),p={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(p);else{var v=a(p,i);i.byIndex=o,t.splice(o,0,{identifier:u,updater:v,references:1})}r.push(u)}return r}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var s=i(e=e||[],a=a||{});return function(e){e=e||[];for(var r=0;r<s.length;r++){var o=n(s[r]);t[o].references--}for(var c=i(e,a),l=0;l<s.length;l++){var d=n(s[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}s=c}}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,a&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},m={};function f(e){var t=m[e];if(void 0!==t)return t.exports;var n=m[e]={id:e,exports:{}};return v[e](n,n.exports,f),n.exports}f.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return f.d(t,{a:t}),t},f.d=(e,t)=>{for(var n in t)f.o(t,n)&&!f.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},f.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),f.nc=void 0,f(845),e=f(72),t=f.n(e),n=f(825),i=f.n(n),a=f(659),s=f.n(a),r=f(56),o=f.n(r),c=f(540),l=f.n(c),d=f(113),u=f.n(d),h=f(220),(p={}).styleTagTransform=u(),p.setAttributes=o(),p.insert=s().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=l(),t()(h.A,p),h.A&&h.A.locals&&h.A.locals;